---
title: "PS3のセーブデータ含まれるPARAM.SFOに含まれるアカウントIDを分析 "
date: 2021-07-24
slug: "20210724"
description: "今回はかなりマニアックな話題。"
keywords: ["ps3", "savedata", "cfw"]
draft: false
tags: ["Tech"]
math: false
toc: false
---


今回はかなりマニアックな話題。  
PS3のセーブデータにPARAM.SFOというファイルが存在する。これにはアカウントIDやコンソールIDが記録されるのだが何故か[アカウントIDが2箇所に記録](https://www.psdevwiki.com/ps3/PARAM.SFO)されている。  
何で2つも同じ値が記録されるのか、気になって夜も眠れないため検証してみた。<br><br>

まず同じ値がどこに記録されてるのか見ていきたい  
<img src="/images/20210724134715.png">

赤字で示した部分が同じ文字列になる。<br><br>

しかし 「A. PSNに全く紐づけてない状態のPS3で作成したデータをUSBにコピーしたもの」 「B. PSNにログイン後、Aと同じセーブデータをUSBにコピー（エクスポート）したもの」「C. PSNでログインした状態でセーブしたデータをコピーしたもの」 を調べると興味深いことが判明した。

##### 補足
少しややこしいので整理すると  
*セーブ→USBにコピー（A）→PSNにログイン→USBにコピー（B）→ゲームを進めてセーブ→USBにコピー（C）*

##### A. PSNに全く紐付けてない状態のPS3で作成したデータ
<img src="/images/20210724135842.png">

##### C. PSNでログインした状態でセーブしたデータ
<img src="/images/20210724140021.png">

しかしBだけACCOUNT_IDの値とPARAMSに含まれるPSNアカウントIDの値が異なったのだ。  

##### B. PSNにログイン後、Aと同じセーブデータをUSBにコピー（エクスポート）したもの
<img src="/images/20210724135311.png">
<br>

この ACCOUNT_ID の "00000000000000000000000000000000" はPSNアカウントに未ログインであることを示す値。それなのにPARAMSのアカウントIDの部分は自分のPSNアカウントのIDになっている。  
このことから **"ACCOUNT_ID" はセーブ時のPSNアカウントのID、 "PARAMS" に含まれるのは現時点でのPSNアカウントのID** ということが判明。<br><br>
問題はどのタイミングでPARAMS内のアカウントIDが書き換えられているか。<br>
Aの最終更新日はセーブ時なのに対しBの最終更新日を見るとどうやらPSNにログインした日時になっている。  
つまり "PSNにログインすると一旦PS3内の全セーブデータのPARAM.SFOのPARAMSに含まれるPSNアカウントIDが更新される" ということ。

### 結論
 - ACCOUNT_ID" はセーブ時のPSNアカウントのID、 "PARAMS" に含まれるのは現時点でのPSNアカウントのID
 - PSNにログインすると一旦PS3内の全セーブデータのPARAM.SFOのPARAMSに含まれるPSNアカウントIDが更新される
 - そのため "ACCOUNT_ID" と "PARAMSに含まれるPSNのID" は必ず一致するという訳ではない

セーブデータの所有者確認には恐らく "PARAMS" に含まれるPSNアカウントのIDが使用されてると思われる。 （セーブ時にサインインしてなくても後からPSNにサインインすればデータを引き継げるようにするための仕様）
